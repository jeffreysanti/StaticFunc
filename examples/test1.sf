
#import string;


// recursive version
def int32 fibr(int8 n)
{
	if(n == 1 | n == 2)
		return 1;
	return fib(n - 1) + fib(n - 2);
}

// tail-recursive version
def int32 fibt(int8 n)
{
	def int32 aux(int8 n_cur, int32 last, int32 lastlast)
	{
		if(n_cur == n)
			return last + lastlast;
		aux(n_cur + 1, last + lastlast, last);
	}
	if(n == 1 | n == 2)
		return 1;
	return aux(3, 1, 1);
}

// iterative (mutable)
def int32 fibi(int8 n)
{
	if(n == 1 | n == 2)
		return 1;

	mut int32 last(1);
	mut int32 lastlast(1);
	for(int8 x in range(3, n))
	{
		int32 tmp(last);
		last = last + lastlast;
		last = tmp;
	}
	return last;
}

def vector<int32> fibbs(int8 n)
{
	println("TestSingle");
	return [fibt(x) for int32 x in range(1, n)];
}

def int32 sum(function<int32, int32> func, int32 n)
{
	if(n == 1)
		return func(n);
	else
		return func(n) + sum(func, n - 1);
}



def int32 main(vector<string> args)
{
	int32 oct(043);
	int32 hex(0x2E);
	int32 hexneg(-0x2E);
	int32 octneg(-021);
	
	// floats
	float16 fl(12.13);
	float16 fl2(.16);
	float16 fln(-54.2);
	float16 fln2(-.6);
	
	println(sum(lambda(	int32(int32 n){
							return n*3;
						}),
				10));
	
	for(int32 x in fibbs(20))
	{
		println(string(x));
		println("Test");
	}
	return 0;
}

